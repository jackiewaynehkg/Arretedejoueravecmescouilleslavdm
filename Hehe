<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
<title>Valentine ğŸ’˜</title>

<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.3/dist/confetti.browser.min.js"></script>

<style>
:root {
  --pink: #ff3b7a;
}

* { box-sizing: border-box; }

body {
  margin: 0;
  min-height: 100svh;
  display: flex;
  justify-content: center;
  align-items: center;
  background: radial-gradient(circle at top, #ffeef6, #ffd6e7);
  font-family: system-ui, sans-serif;
  overflow: hidden;
  padding: env(safe-area-inset-top)
           env(safe-area-inset-right)
           env(safe-area-inset-bottom)
           env(safe-area-inset-left);
}

.card {
  width: 100%;
  max-width: 420px;
  background: #ffffffdd;
  backdrop-filter: blur(10px);
  border-radius: 24px;
  padding: 24px 20px 28px;
  text-align: center;
  box-shadow: 0 18px 60px rgba(0,0,0,.15);
}

h1 {
  font-size: 26px;
  line-height: 1.2;
  margin-bottom: 24px;
}

.zone {
  position: relative;
  height: 220px;
  margin-bottom: 10px;
}

button {
  position: absolute;
  padding: 18px 28px;
  font-size: 20px;
  font-weight: 800;
  border-radius: 999px;
  border: none;
  cursor: pointer;
  box-shadow: 0 10px 24px rgba(0,0,0,.14);
  touch-action: manipulation;
}

#yes {
  left: 10%;
  top: 55%;
  background: var(--pink);
  color: #fff;
}

#no {
  left: 55%;
  top: 55%;
  background: #e5e7eb;
}

.hint {
  font-size: 13px;
  opacity: .65;
}

.result {
  display: none;
  margin-top: 18px;
  animation: pop .35s ease;
}

@keyframes pop {
  from { transform: scale(.95); opacity: 0; }
  to   { transform: scale(1); opacity: 1; }
}
</style>
</head>

<body>

<main class="card">
  <h1>Sabrine,<br>veux-tu Ãªtre ma Valentine ? ğŸ‘¨ğŸ¾â€ğŸ¦¯</h1>

  <div class="zone" id="zone">
    <button id="yes">Oui</button>
    <button id="no">Non</button>
  </div>

  <div class="hint" id="hint">Le bouton Non panique.</div>

  <div class="result" id="result">
    <h2>OUI OBLIGATOIRE ğŸ‰ğŸ˜‚</h2>
    <p id="typing"></p>
    <p style="font-size:12px;opacity:.6;margin-top:8px;">
      ğŸ“¢ EnvoyÃ© Ã  3 personnes.
    </p>
  </div>
</main>

<script>
const zone = document.getElementById("zone");
const yes = document.getElementById("yes");
const no = document.getElementById("no");
const result = document.getElementById("result");
const hint = document.getElementById("hint");

const confettiInstance = confetti.create(document.body, { resize: true });

let yesScale = 1;
let escapeCount = 0;

const noTexts = [
  "Non",
  "Attends ğŸ˜³",
  "C'Ã©tait une blague",
  "Pourquoi ğŸ˜­",
  "STOP",
  "OK J'AI COMPRIS"
];

function growYes() {
  yesScale = Math.min(2.6, yesScale + 0.12);
  yes.style.transform = `scale(${yesScale})`;
}

function teleportNo() {
  const z = zone.getBoundingClientRect();
  const b = no.getBoundingClientRect();

  const maxX = z.width - b.width;
  const maxY = z.height - b.height;

  no.style.left = Math.random() * maxX + "px";
  no.style.top  = Math.random() * maxY + "px";
  no.style.transform = `rotate(${Math.random()*360}deg)`;

  no.textContent = noTexts[Math.min(escapeCount, noTexts.length - 1)];
  escapeCount++;
  growYes();
  if (navigator.vibrate) navigator.vibrate(40);

  if (escapeCount === 6) explodeNo();
}

function explodeNo() {
  const r = no.getBoundingClientRect();
  confettiInstance({
    particleCount: 120,
    spread: 100,
    origin: {
      x: r.left / window.innerWidth,
      y: r.top / window.innerHeight
    }
  });

  no.remove();
  hint.textContent = "Le bouton Non est KO ğŸ’€";
}

zone.addEventListener("pointermove", e => {
  if (!no.isConnected) return;
  const b = no.getBoundingClientRect();
  const d = Math.hypot(
    (b.left + b.width / 2) - e.clientX,
    (b.top + b.height / 2) - e.clientY
  );
  if (d < 110) teleportNo();
});

no.addEventListener("click", e => e.preventDefault());

yes.addEventListener("click", () => {
  zone.style.display = "none";
  hint.style.display = "none";
  result.style.display = "block";

  confettiInstance({
    particleCount: 280,
    spread: 140,
    origin: { y: 0.6 }
  });

  const text = "ğŸ“¸ Screenshot obligatoire.";
  let i = 0;
  const el = document.getElementById("typing");
  const typing = setInterval(() => {
    el.textContent += text[i++];
    if (i === text.length) clearInterval(typing);
  }, 55);
});
</script>

</body>
</html>
